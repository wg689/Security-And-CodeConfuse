# Security-And-CodeConfuse
App Security And CodeConfuse (app å®‰å…¨å’Œä»£ç æ··æ·†çš„demoçš„æ‰‹æŠŠæ‰‹æ•™ä½ çš„è¯¦ç»†æ•™ç¨‹)

##ğŸ“£æœ¬æ–‡å†…å®¹
- ä¸€)ä¸ºä»€ä¹ˆè¦è¿›è¡Œä»£ç æ··æ·†
- äºŒ)ä»£ç æ··æ·†çš„ä¸¤ç§æ–¹æ³•(â‘ å®æ›¿æ¢ â‘¡è„šæœ¬å®ç°æ›¿æ¢)[æœ¬æ–‡githubåœ°å€](https://github.com/wg689/Security-And-CodeConfuse),æ•¬è¯·star
- ä¸‰)ä»£ç æ··æ·†å‚è€ƒçš„åšå®¢åŠè¯´æ˜


#ğŸ“£1ï¼‰ä¸ºä»€ä¹ˆè¦è¿›è¡Œä»£ç æ··æ·†?

iOS çš„ä»»ä½•appéƒ½å¯ä»¥ä½¿ç”¨classdumpå¯¹åŸç¨‹åºè¿›è¡Œdumpï¼Œå¯ä»¥dumpå‡ºæ‰€æœ‰æºç¨‹åºçš„å‡½æ•°æ‰€æœ‰ä¿¡æ¯ï¼šæºç¨‹åºæ‰€æœ‰å‡½æ•°ç±»å‹ï¼Œå˜é‡å…¨éƒ¨æ³„éœ²ã€‚è¿™æ ·çš„è¯ï¼Œè®©æ”»å‡»è€…ï¼Œä¹Ÿå°±æ˜¯é»‘å®¢ä»¬äº†è§£äº†ç¨‹åºç»“æ„æ–¹ä¾¿é€†å‘ã€‚å› ä¸ºåœ¨å·¥ç¨‹ä¸­ï¼Œæˆ‘ä»¬è¿™äº›å˜é‡æˆ–å‡½æ•°å‘½åéƒ½æ˜¯æœ‰ä¸€å®šå¯è¯»æ€§çš„ï¼Œä¾‹å¦‚è·Ÿç”¨æˆ·åç›¸å…³çš„ï¼Œé‚£ä¸€èˆ¬é‡Œé¢ä¼šæœ‰ userNameï¼Œè·Ÿå¯†ç ç›¸å…³çš„ä¸€èˆ¬ä¼šæœ‰ passWordï¼Œè¿™æ ·å®šä¹‰ä¹Ÿæ˜¯ä¸ºäº†æˆ‘ä»¬è‡ªå·±ä»£ç å¯è¯»æ€§æ›´å¼ºï¼Œæˆ‘ä»¬ä¿®æ”¹çš„æ—¶å€™æ‰æ›´åŠ çš„æ–¹ä¾¿ã€‚ä½†æ˜¯æˆ‘ä»¬ç›¸ä¿¡ï¼Œè¿™ä¹ˆä¸ªå®šä¹‰æ³•ï¼Œæˆ‘ä»¬åªæ˜¯å¸Œæœ›æ–¹ä¾¿æˆ‘ä»¬è‡ªå·±ï¼Œæˆ‘ä»¬å¯ä¸å¸Œæœ›æ–¹ä¾¿é»‘å®¢ä»¬å»ç ´è§£æˆ‘ä»¬çš„APPã€‚
å¦‚æœæˆ‘ä»¬æŠŠè‡ªå·±çš„ç¨‹åºæ‰“åŒ…ä¸ºipa ä½¿ç”¨class-dump ,dumpå‡ºç¨‹åºçš„æ‰€æœ‰å¤´æ–‡ä»¶å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å¤´æ–‡ä»¶,æ‰“å¼€å¤´æ–‡ä»¶å°±å¯ä»¥çœ‹åˆ°æ‰€æœ‰çš„å˜é‡å’Œå‡½æ•°äº†:

![æ‰§è¡Œdump](http://upload-images.jianshu.io/upload_images/1194882-6487f7fcb35a5ed1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ä»£ç æ²¡æ··æ·†åç¼–è¯‘ç»“æœ,.hæ–‡ä»¶ä¸­å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤º
![ä»£ç æ²¡æ··æ·†çš„åç¼–è¯‘ç»“æœ](http://upload-images.jianshu.io/upload_images/1194882-98239dd199a5bb40.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ä»£ç æ··æ·†åç¼–è¯‘ç»“æœ,.hæ–‡ä»¶ä¸­å‡½æ•°å¦‚ä¸‹å›¾æ‰€ç¤º
![ä»£ç æ··æ·†åçš„åç¼–è¯‘ç»“æœ](http://upload-images.jianshu.io/upload_images/1194882-571fe68204d950f7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


**ä¹Ÿè®¸ä½ ä¼šé—®,å¯¹å¾®ä¿¡å’Œæ”¯ä»˜å®çœ‹çœ‹ä»–ä»¬çš„å¤´æ–‡ä»¶å¯ä¸å¯ä»¥å‘¢?å½“ç„¶ä¹Ÿæ˜¯å¯ä»¥çš„,å…·ä½“æ€ä¹ˆåš å‚è€ƒæˆ‘çš„è¿™ç¯‡åšå®¢[iOS é€†å‘å¯¼å‡ºappçš„å¤´æ–‡ä»¶(é€†å‘å·¥ç¨‹ä¹¦ç±è¡¥å……)](http://www.jianshu.com/p/d2400a80fdc5)**,å½“ç„¶ä½ ä¹Ÿå¯ä»¥æ‰¾æ›´å¥½çš„åšå®¢,çœ‹çœ‹å¾®ä¿¡çš„iOSå¼€å‘äººå‘˜å‡½æ•°å‘½åæ˜¯å¦è§„èŒƒ,æˆ‘çœ‹è¿‡,å°‘æ•°ä¹Ÿæ˜¯ä¸è§„èŒƒçš„,å¤§éƒ¨åˆ†è¿˜æ˜¯æ¯”è¾ƒè§„èŒƒçš„!
ä¸ºäº†é˜»æ­¢åˆ«äººä½¿ç”¨é€†å‘å·¥ç¨‹ä¿®æ”¹æˆ‘ä»¬çš„ä»£ç éœ€è¦åšåç¼–è¯‘,å¾®ä¿¡çš„ä»£ç å¾ˆå¤šæ˜¯æ²¡æœ‰åç¼–è¯‘çš„ã€‚åå‘å·¥ç¨‹ä¼šå¸¦æ¥è®¸å¤šé—®é¢˜ï¼Œè¯¸å¦‚çŸ¥è¯†äº§æƒæ³„éœ²ï¼Œç¨‹åºå¼±ç‚¹æš´éœ²æ˜“å—æ”»å‡»ç­‰ã€‚
å¾ˆå¤šäººå®ç° [ä¼ä¸šå¾®ä¿¡ç­¾åˆ°åç¼–è¯‘](bbs.iosre.com/t/topic/4408), [ç”¨Hopperæå®šMacè¿…é›·çš„ä¼šå‘˜ä»¥åŠç¦»çº¿ä¸‹è½½åŠŸèƒ½](bbs.iosre.com/t/hopper-mac/1428)ç­‰ç­‰é€†å‘å·¥ç¨‹çš„æ–‡ç« ,è¿™äº›é€†å‘ä¹‹æ‰€ä»¥æˆåŠŸ,æ˜¯å› ä¸ºè¿™äº›å¾®ä¿¡å’Œè¿…é›·çš„å®ç°è¿™äº›åŠŸèƒ½çš„æ ¸å¿ƒä»£ç æ²¡æœ‰è¿›è¡Œä»£ç æ··æ·†,å¦‚æœè¿›è¡Œäº†ä»£ç æ··æ·†,å³ä½¿é€†å‘äº†,æ‰¾ä¸åˆ°å®ç°åŠŸèƒ½çš„å‡½æ•°,æ— æ³•ä¿®æ”¹è¿™äº›å‡½æ•°,å°±æ— æ³•å®ç°ç”¨Hopperæå®šMacè¿…é›·çš„ä¼šå‘˜ä»¥åŠç¦»çº¿ä¸‹è½½åŠŸèƒ½äº†ã€‚
**ä¸ºä»€ä¹ˆåšæ··æ·† ?è¿˜æœ‰æ›´é‡è¦çš„åŸå› **:æŸä¸€å¤©æŸå®‰å…¨å…¬å¸ç»™ä½ å‘ä¸€ä»½å®‰å…¨æµ‹è¯•æŠ¥å‘Š,ä½ çš„ä»£ç æ²¡åšæ··æ·†(å½“ç„¶ä¸åªè¿™ä¸€ä¸ªé£é™©),å­˜åœ¨å®‰å…¨é£é™©,boss å¬è¯´æœ‰é£é™©è‚¯å®šè®©ä½ è§£å†³è¿™ä¸ªé—®é¢˜å•Š,æˆ‘ä»¬å…¬å¸å°±æ˜¯è¿™æ ·çš„æƒ…å†µ,æˆ‘æ‰åšçš„çš„ä»£ç æ··æ·†çš„!!
å¦‚ä½•è¿›è¡Œä»£ç æ··æ·†,ç»è¿‡æˆ‘æŸ¥é˜…èµ„æ–™,å‘ç°æœ‰ä¸¤ç§æ–¹æ³•,ä¸€ç§ç®€å•è¾ƒlow,ä¸€ç§å¤æ‚ç‚¹æ¡£æ¬¡é«˜ç‚¹!ä¸‹é¢ä»‹ç»ä»£ç æ··æ·†çš„ä¸¤ç§æ–¹æ³•
#ğŸ“£2ä»£ç æ··æ·†çš„ä¸¤ç§æ–¹æ³•

##2.1ç®€å•çš„å®æ›¿æ¢ï¼ˆå¾ˆç®€å•ä¹Ÿæœ‰ä¸€ç‚¹ç‚¹lowï¼‰
####2.1.1
æ‰“å¼€é¡¹ç›®æ–°å»ºConfuseReplace.h æ–‡ä»¶,æŠŠéœ€è¦æ›¿æ¢çš„å‡½æ•°åä½¿ç”¨#defineå°±å¯ä»¥(æœ¬æ–¹æ³•å…¶å®å¯ä»¥ç”¨è¿™ä¸€å¥å°±å¯ä»¥è¯´å®Œçš„)
```
#ifndef ConfuseReplace_h
#define ConfuseReplace_h]

#define sample        XZwTFgszVxFieZta
#define seg1        mviuwjseJZYYamwu
#define zheshi     uNCrcYEobhpPGLuf
#define xxxxxx     achfhhffhhfh

#endif /* ConfuseReplace_h */

```
####2.1.2
controller.hæ–‡ä»¶ä¸­
```
@interface ViewController : UIViewController

-(void)sample;
-(void)seg1:(NSString *)string seg2:(NSUInteger)num;
-(void)zheshi:(NSString *)string seg2:(NSUInteger)num;

- (void)xxxxxx;

@end
```
controller.mæ–‡ä»¶ä¸­
```
-(void)sample{  
}

-(void)seg1:(NSString *)string seg2:(NSUInteger)num{
}
-(void)zheshi:(NSString *)string seg2:(NSUInteger)num{
   
}
- (void)xxxxxx{ 
}
```
**ä¸Šé¢å·²ç»æå®šäº†ä»£ç æ··æ·†,å°±æ˜¯è¿™ä¹ˆç®€å•.æ¯ä¸ªå‡½æ•°åçš„ä¸²éƒ½æ˜¯å®å®šä¹‰å¥½çš„,ä¹Ÿè®¸æœ‰äººä¼šé—®,äººå®¶æ‹¿åˆ°äº†`ConfuseReplace.h`æ–‡ä»¶,é‚£è¿™ä¹ˆæ›¿æ¢å²‚ä¸æ˜¯ç™½æ­,äººå®¶çŸ¥é“é‚£ä¸ªå‡½æ•°åå’Œé‚£ä¸ªå­—ç¬¦ä¸²å¯¹åº”å•Š,ç»ç¬”è€…äº²è‡ªéªŒè¯,å®å®šä¹‰çš„å­—ç¬¦ä¸²ä½¿ç”¨class-dump æ˜¯dump ä¸å‡ºæ¥çš„,æ‰€ä»¥æˆ‘ä»¬å°±æ”¾å¿ƒçš„ç”¨**

æˆ‘ä»¬ä½¿ç”¨ä»£ç æ··æ·†è®©åˆ«äººä½¿ç”¨class-dump åç¼–è¯‘å‡ºæˆ‘ä»¬çš„æ–¹æ³•åæ˜¯ä¹±ç ,è¾¾åˆ°æ··æ·†çš„ç›®çš„,æ··æ·†ä¹‹åé»‘å®¢ä½¿ç”¨class-dump å‡ºä½ çš„å¤´æ–‡ä»¶ä¸çŸ¥é“ä½ è¿™ä¸ªå‡½æ•°æ˜¯åšä»€ä¹ˆ,å°±ä¸èƒ½ä¿®æ”¹ä½ çš„åŠŸèƒ½ ,ä½¿ç”¨è¿™ç§æ··æ·†æ–¹æ³•class-dump åçš„å¤´æ–‡ä»¶å¦‚ä¸‹,
ä½¿ç”¨class-dumpéœ€è¦å…ˆå®‰è£…class-dump,å¦‚ä½•å®‰è£…class-dumpè§è¿™ç¯‡æ–‡ç« [iOSé€†å‘å·¥ç¨‹-----class-dump](www.jianshu.com/p/2add936e8bdd),æœ‰å¦‚ä½•å®‰è£…class-dumpå’Œä½¿ç”¨class-dump
å¯¼å‡º.hæ–‡ä»¶çš„è¿‡ç¨‹å¦‚ä¸‹å›¾æ‰€ç¤º

![å¯¼å‡ºå¤´æ–‡ä»¶æ›¿æ¢çš„æ–¹å¼.gif](http://upload-images.jianshu.io/upload_images/1194882-14997a2242bc84d3.gif?imageMogr2/auto-orient/strip)

æŸ¥çœ‹å¯¼å‡ºçš„å¤´æ–‡ä»¶

![å¯¼å‡ºçš„å¤´æ–‡ä»¶æŸ¥çœ‹.gif](http://upload-images.jianshu.io/upload_images/1194882-57f0aa06ba1f2f4e.gif?imageMogr2/auto-orient/strip)


```
- (void)XZwTFgszVxFieZta;
- (void)achfhhffhhfh;
- (void)didReceiveMemoryWarning;
- (void)mviuwjseJZYYamwu:(id)arg1 seg2:(unsigned long long)arg2;
- (void)uNCrcYEobhpPGLuf:(id)arg1 seg2:(unsigned long long)arg2;
```
è¿™ç§æ–¹æ³•çš„demoè§[æˆ‘çš„github](https://github.com/wg689/Security-And-CodeConfuse)ä¸­çš„confuseDemoè¿™ä¸ªæ–‡ä»¶å¤¹.å…¶å®è¯´è¿™ä¹ˆå¤š**å¤§å®¶çœ‹ä¸€ä¸‹Demoç§’æ‡‚,å”¯ä¸€çš„éš¾ç‚¹æ˜¯éœ€è¦å­¦ä¹ ä¸‹class-dumpå¯¼å‡ºå¤´æ–‡ä»¶æ¥éªŒè¯æ˜¯å¦æ··æ·†æˆåŠŸ**!æ•™ç¨‹éƒ½ç»™ä½ é“¾æ¥äº†,å­¦ä¸å­¦å°±çœ‹ä½ å•¦!


##2.2ä½¿ç”¨è„šæœ¬æ›¿æ¢æ–¹æ³•åï¼ˆå¾ˆç®€å•ä¹Ÿæœ‰ä¸€ç‚¹ç‚¹lowï¼‰
ç¬¬ä¸€ã€æ–°å»ºä¸€ä¸ªå·¥ç¨‹,åœ¨å·¥ç¨‹é¡¹ç›®è·¯å¾„ä¸­å»ºç«‹ä¸€ä¸ªconfuse.shã€ä¸€ä¸ªfunc.listæ–‡ä»¶å…ˆæ‰“å¼€ç»ˆç«¯ï¼Œç„¶å cd åˆ°ä½ çš„é¡¹ç›®å·¥ç¨‹è·¯å¾„ä¸‹ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-a83b24429d8a6f80.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
cd åˆ°é¡¹ç›®å·¥ç¨‹è·¯å¾„ä¸‹ç„¶ååˆ›å»ºä¸¤ä¸ªæ–‡ä»¶ï¼Œä¸€ä¸ª confuse.shï¼Œä¸€ä¸ª func.listï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-8882eaa1d6edcea3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**æ³¨æ„ç‚¹,ä¸æŒ‰ç…§ä¸‹é¢ä¸¤ä¸ªæ“ä½œ,è¿è¡Œè„šæœ¬ä¼šæŠ¥é”™**:
![ç›®å½•ç»“æ„ä¸è¦é”™](http://upload-images.jianshu.io/upload_images/1194882-5c76911e69387114.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


![å±‚çº§ç›®å½•ä¸è¦é”™](http://upload-images.jianshu.io/upload_images/1194882-41111738b3f3a338.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


åˆ›å»ºä¸¤ä¸ªæ–‡ä»¶è¿™æ—¶å€™æˆ‘ä»¬æ‰“å¼€è¿™ä¸ªå·¥ç¨‹æ–‡ä»¶å¤¹ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œè¿™ä¸¤ä¸ªæ–‡ä»¶å·²ç»åˆ›å»ºå¥½äº†ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-30d5ba6b57bc23f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æˆ‘ä»¬åˆ›å»ºçš„ä¸¤ä¸ªæ–‡ä»¶æ‰“å¼€å·¥ç¨‹ï¼ŒæŠŠåˆšæ‰åˆ›å»ºçš„ä¸¤ä¸ªæ–‡ä»¶åŠ è¿›å»ï¼Œå³é”®ä½ çš„é¡¹ç›®è“è‰²æ ‡å¿—ï¼Œç„¶åé€‰æ‹© Add Files to...ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-3647bfe4cff77928.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æ·»åŠ åˆ°å·¥ç¨‹ä¸­

æ·»åŠ è¿›å»äº†ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-91c396eece9554c3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æˆåŠŸæ·»åŠ ç‚¹å‡» confuse.sh**(confuse.sh,å’Œfunc.listå¿…é¡»æ·»åŠ åˆ°NSUTestç›®å½•ä¸‹)**å‘ç°è¿˜æ˜¯ç©ºç™½çš„ï¼Œä»€ä¹ˆéƒ½æ²¡æœ‰ï¼Œç°åœ¨è¦åœ¨è¿™ä¸Šé¢åŠ ä¸Šä»£ç äº†ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-24898a7d0b1d8d95.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
éœ€è¦æ·»åŠ çš„ä»£ç åŸè„šæœ¬ä»£ç å‡ºè‡ªï¼š[http://blog.csdn.net/yiyaaixuexi/article/details/29201699](http://blog.csdn.net/yiyaaixuexi/article/details/29201699)
ç¬¬äºŒã€åœ¨ .pch æ–‡ä»¶ä¸­æ·»åŠ ä»£ç ä¸è¦è·Ÿæˆ‘è¯´ä½ çš„å·¥ç¨‹æ²¡æœ‰ .pch æ–‡ä»¶ï¼Œå¦‚æœçœŸæ²¡æœ‰ï¼Œè‡ªè¡Œç™¾åº¦ï¼Œè¿™åº”è¯¥ç®—æ˜¯æ ‡é…ï¼Œå¸¸è¯†æ¥çš„ã€‚
```
#ifdef __OBJC__  #import <UIKit/UIKit.h> 
 #import <Foundation/Foundation.h>  
//æ·»åŠ æ··æ·†ä½œç”¨çš„å¤´æ–‡ä»¶ï¼ˆè¿™ä¸ªæ–‡ä»¶åæ˜¯è„šæœ¬confuse.shä¸­å®šä¹‰çš„ï¼‰ 
 #import "codeObfuscation.h" #endif
```

å†™åˆ°è¿™é‡Œï¼Œç¼–è¯‘çš„æ—¶å€™æ˜¯ä¸æ˜¯å‘ç°æŠ¥é”™å•¦ï¼Ÿåˆšæ‰çš„ .pch æ–‡ä»¶é‡Œé¢çš„æ·»åŠ çš„ä»£ç å±…ç„¶æŠ¥é”™äº†ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-a00746901023d730.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æŠ¥é”™äº†ï¼ä¸è¦æ…Œï¼Œå…ˆæŠŠé‚£å¥æŠ¥é”™çš„å…ˆç»™æ³¨é‡Šæ‰ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-99351d306a14f041.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
å…ˆæ³¨é‡Šæ‰æŠ¥é”™çš„è¿™ä¸€è¡Œä»£ç ç„¶åæˆ‘ä»¬ç»§ç»­å¾€ä¸‹èµ°ï¼
ç¬¬ä¸‰ã€é…ç½® Build Phase1:æ·»åŠ  Run Script
![](http://upload-images.jianshu.io/upload_images/1194882-8785723ff48e33cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)æ·»åŠ  Run Script

2:é…ç½®å¥½ Run Script
![](http://upload-images.jianshu.io/upload_images/1194882-27f3d3132dc61a6f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
é…ç½®å¥½ Run Scriptç„¶åå†å›åˆ°ç»ˆç«¯ï¼ŒåŒæ ·å…ˆ cd åˆ°å·¥ç¨‹ç›®å½•ä¸‹ï¼Œæ¥ç€æˆ‘ä»¬è¦æ‰“å¼€åˆšæ‰ .sh è¿™ä¸ªè„šæœ¬æ–‡ä»¶çš„è¿è¡Œæƒé™ï¼Œå› ä¸ºé»˜è®¤æ˜¯æ²¡æœ‰è¿™ä¸ªæƒé™çš„ï¼Œåœ¨ç»ˆç«¯è¾“å…¥ä»¥ä¸‹æŒ‡ä»¤ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-589cbd5482842748.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æ‰“å¼€è¿è¡Œæƒé™å›è½¦ï¼Œæå®šï¼Œå›åˆ°æˆ‘ä»¬çš„å·¥ç¨‹ï¼Œå…ˆ command + b ç¼–è¯‘ä¸€ä¸‹å·¥ç¨‹ï¼Œç„¶åå†æŠŠæˆ‘ä»¬åˆšåˆšæ³¨é‡Šæ‰çš„é‚£å¥ä»£ç è§£å¼€ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-57198c58d601b353.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æ‰“å¼€åˆšåˆšè¢«æˆ‘ä»¬æ³¨é‡Šæ‰çš„ä»£ç å†æ¬¡ command + b ç¼–è¯‘ï¼Œç°åœ¨æ˜¯ä¸æ˜¯ç¼–è¯‘é€šè¿‡å•¦ï¼ŸåˆšåˆšæŠ¥é”™çš„ï¼Œç°åœ¨è§£å†³äº†ï¼
åŸºæœ¬ä¸Šå°±æå®šäº†ï¼Œå‰©ä¸‹çš„å°±æ˜¯æ·»åŠ ä¸Šæˆ‘ä»¬æƒ³è¦æ··æ·†çš„å˜é‡åæˆ–å‡½æ•°å
ç¬¬å››ã€åœ¨ func.list æ–‡ä»¶é‡Œï¼Œå†™å…¥å¾…æ··æ·†çš„å‡½æ•°åå¦‚æœåƒä¸‹é¢è¿™å‡ ä¸ªå±æ€§è·Ÿå‡½æ•°ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-f15c04d03abca131.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
éœ€è¦æ··æ·†çš„å±æ€§è·Ÿå‡½æ•°åé‚£ä¹ˆå°±è¿™åœ¨ fun.list å°±è¿™ä¹ˆåˆ—å‡ºæ¥å°±å¥½äº†ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-4ed4a4164857ef4b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
åˆ—å‡ºéœ€è¦æ··æ·†çš„,å¤§åŠŸå‘Šæˆï¼ç°åœ¨ command + b è¿è¡Œä¸€ä¸‹ï¼Œç„¶ååœ¨å“ªé‡Œçœ‹ç»“æœå‘¢ï¼Œè¯·çœ‹è¿™é‡Œï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-4aef5fd8b61407fe.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
è¿è¡Œç»“æœå¯èƒ½è¿™ä¹ˆçœ‹æœ‰ç‚¹éº»çƒ¦ï¼Œé‚£æ¥ä¸ªç®€å•ä¸€ç‚¹çš„ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-677a1c2664914bb8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
æŸ¥çœ‹å“ˆå“ˆï¼Œä½ ä¼šå‘ç°ï¼Œå¤šäº†å¥½å¤šå®å®šä¹‰ï¼Œå…¶å®å°±æ˜¯æˆ‘ä»¬åˆšæ‰çš„å­—æ®µæ¥çš„ï¼š
![](http://upload-images.jianshu.io/upload_images/1194882-be5aaa35dd378146.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
ç»“æœå½“ç„¶ï¼Œè¿™ä¹Ÿåªæ˜¯æœ€ç®€å•çš„ä»£ç æ··æ·†è€Œå·²ï¼ŒAPPå®‰å…¨è¿˜æ˜¯æœ‰å¾ˆå¤šéœ€è¦æ³¨æ„çš„ã€‚ä¸€æ­¥ä¸€æ­¥æ¥å§ï¼
**æœ€åéœ€è¦è¯´æ˜,å‡ºç°ä¸‹å›¾æ‰€ç¤ºçš„è¿™é‡Œå¹¶ä¸ä¸€å®šè¯´æ˜ä»£ç æ··æ·†æˆåŠŸ,åªèƒ½è¯´æ˜ä½ çš„è„šæœ¬è¿è¡ŒæˆåŠŸ,.pchæ–‡ä»¶ä¸­ä¸€å®šè¦å¯¼å…¥`#import "codeObfuscation.h"`**æœ€å¥½å¯¹è‡ªå·±æ··æ·†çš„ä»£ç  æ‰“åŒ…æˆipaè¿›è¡Œdump,æŸ¥çœ‹ä½ æ··æ·†çš„å¤´æ–‡ä»¶çš„å‡½æ•°åæ˜¯ä¸æ˜¯éšæœºçš„å­—ç¬¦ä¸²äº†.
![Snip20160816_11.png](http://upload-images.jianshu.io/upload_images/1194882-beeb6c54243cc542.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


##ğŸ“£githubåœ°å€å’ŒDemoä¸­çš„å„ä¸ªæ–‡ä»¶å¤¹ç”¨é€”è¯´æ˜
![demoæ–‡ä»¶ç›®å½•](http://upload-images.jianshu.io/upload_images/1194882-4ca25fbf6a8aa48d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)
**å¯¹ä¸Šå›¾ä¸­çš„å„ä¸ªæ–‡ä»¶å¤¹è¯´æ˜å¦‚ä¸‹:**
- class dump header of confuseDemo:
é‡Œé¢æ”¾çš„æ˜¯å¯¹confuseDemo(è¿›è¡Œäº†æ··æ·†)æ‰“åŒ…ä¸ºipa,å†æ‰§è¡Œclass-dump,dump å‡ºæ¥çš„æ‰€æœ‰çš„å¤´æ–‡ä»¶
- class dump header of Demo2  confuse success
é‡Œé¢æ”¾çš„æ˜¯å¯¹Demo2(è¿›è¡Œäº†æ··æ·†)æ‰“åŒ…ä¸ºipa,å†æ‰§è¡Œclass-dump,dump å‡ºæ¥çš„æ‰€æœ‰çš„å¤´æ–‡ä»¶
- class dump header of Demo2 not confuse success
é‡Œé¢æ”¾çš„æ˜¯å¯¹Demo2(æ²¡æœ‰è¿›è¡Œæ··æ·†)æ‰“åŒ…ä¸ºipa,å†æ‰§è¡Œclass-dump,dump å‡ºæ¥çš„æ‰€æœ‰çš„å¤´æ–‡ä»¶
- confuseDemo
ä½¿ç”¨å®å®šä¹‰æ›¿æ¢çš„demo,ç›´æ¥å‚è€ƒ,ç§»æ¤åˆ°è‡ªå·±çš„å·¥ç¨‹å°±è¡Œ
- confuseDemo ipa
å¯¹confuseDemo æ‰“åŒ…ä¸ºipaäº†,ä½ å¯ä»¥ä½¿ç”¨é‡Œé¢çš„confuseDemo.appæ–‡ä»¶è¿›è¡Œclass-dump
- Demo2
ä½¿ç”¨è„šæœ¬è¿›è¡Œä»£ç æ··æ·†çš„demo ,ä½ å¯ä»¥å‚è€ƒ,ç§»æ¤åˆ°è‡ªå·±çš„å·¥ç¨‹ä¸­

[æœ¬æ–‡githubåœ°å€](https://github.com/wg689/Security-And-CodeConfuse),æ•¬è¯·star!
#æœ¬æ–‡å‚è€ƒåšå®¢:
[å¿µèŒœå¥³ç¥çš„ä»£ç æ··æ·†åšå®¢](http://blog.csdn.net/yiyaaixuexi/article/details/29201699)è„šæœ¬æ˜¯å¥¹æä¾›çš„
[iOS å¯¹æºä»£ç è¿›è¡Œæ··æ·†](www.jianshu.com/p/98227950a474)æœ¬æ–‡çš„éƒ¨åˆ†å†…å®¹åœ¨è¿™ç¯‡çš„åŸºç¡€ä¸Šæ›´æ”¹çš„,åŸæ–‡åªæœ‰ä¸€ç§æ–¹æ³•,æˆ‘è¿™é‡Œæä¾›äº†ä¸¤ç§,åŸæ–‡æ²¡Demo,æˆ‘æä¾›äº†ä¸¤ç§æ–¹æ³•çš„Demo,å¯¹Class-dumpç­‰éƒ¨åˆ†å†…å®¹ä½œäº†æ›´å¤šè¯´æ˜,ç«™åœ¨åˆ«äººçš„è‚©è†€ä¸Šä¸€æ­¥æ­¥çš„ä¼˜åŒ–å®Œå–„çš„å“ˆ,æ‰å‡ºæ¥äº†æœ¬æ–‡!